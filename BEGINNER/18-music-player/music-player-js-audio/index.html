<!doctype html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Music Player — Level 2 (JS + Audio API)</title>
    <style>
      :root{--bg:#0f1220;--card:#161a2b;--txt:#e5e7eb;--muted:#94a3b8;--accent:#7c3aed}
      *{box-sizing:border-box}body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(135deg,#0b1020,#1b1630);color:var(--txt);min-height:100dvh;display:grid;place-items:center;padding:24px}
      .card{width:min(420px,92vw);background:var(--card);border-radius:20px;padding:24px;box-shadow:0 15px 40px rgba(0,0,0,.35)}
      .cover{width:100%;aspect-ratio:1/1;border-radius:16px;object-fit:cover}
      .title{margin:16px 0 4px;font-size:20px;font-weight:700}
      .artist{margin:0;color:var(--muted)}
      .row{display:flex;align-items:center;gap:12px;margin:14px 0}
      input[type="range"]{flex:1;appearance:none;height:8px;background:#232742;border-radius:999px;outline:none}
      input[type="range"]::-webkit-slider-thumb{appearance:none;width:16px;height:16px;border-radius:50%;background:#7c3aed;cursor:pointer}
      .controls{display:flex;justify-content:center;gap:16px;margin-top:8px}
      button{all:unset;background:#232742;border:1px solid #2c3055;padding:10px 14px;border-radius:999px;cursor:pointer;color:#cbd5e1}
      .primary{background:linear-gradient(90deg,#7c3aed,#06b6d4);color:white;border:none}
      .time{font-variant-numeric:tabular-nums}
    </style>
  </head>
  <body>
    <main class="card">
      <img class="cover" src="https://images.unsplash.com/photo-1511379938547-c1f69419868d?q=80&w=1600&auto=format&fit=crop" alt="Album cover" />
      <h1 class="title">Sample — Audio Test</h1>
      <p class="artist">Public Domain</p>

      <audio id="audio" preload="metadata" src="https://www2.cs.uic.edu/~i101/SoundFiles/PinkPanther30.mp3"></audio>

      <div class="row">
        <span class="time" id="cur">00:00</span>
        <input id="seek" type="range" min="0" value="0" step="0.1" />
        <span class="time" id="dur">00:00</span>
      </div>

      <div class="controls">
        <button id="prev">Prev</button>
        <button id="play" class="primary">Play</button>
        <button id="next">Next</button>
      </div>
    </main>

    <script>
      const audio = document.getElementById('audio');
      const playBtn = document.getElementById('play');
      const seek = document.getElementById('seek');
      const cur = document.getElementById('cur');
      const dur = document.getElementById('dur');

      function fmt(t){
        if(!isFinite(t)) return "00:00";
        const m = Math.floor(t/60).toString().padStart(2,'0');
        const s = Math.floor(t%60).toString().padStart(2,'0');
        return `${m}:${s}`;
      }

      audio.addEventListener('loadedmetadata', () => {
        seek.max = audio.duration ?? 0;
        dur.textContent = fmt(audio.duration || 0);
      });

      audio.addEventListener('timeupdate', () => {
        seek.value = audio.currentTime;
        cur.textContent = fmt(audio.currentTime);
      });

      seek.addEventListener('input', () => {
        audio.currentTime = Number(seek.value);
      });

      playBtn.addEventListener('click', async () => {
        if(audio.paused){
          await audio.play();
          playBtn.textContent = 'Pause';
        }else{
          audio.pause();
          playBtn.textContent = 'Play';
        }
      });

      // Dummy prev/next (cấp 5 sẽ có playlist)
      document.getElementById('prev').onclick = () => audio.currentTime = 0;
      document.getElementById('next').onclick = () => audio.currentTime = Math.min((audio.currentTime+10), audio.duration || 0);
    </script>
  </body>
</html>
