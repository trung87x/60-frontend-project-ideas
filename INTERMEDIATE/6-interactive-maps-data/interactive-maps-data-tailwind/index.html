<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interactive Maps ‚Äî Level 3 (Tailwind)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
</head>
<body class="min-h-dvh bg-gradient-to-br from-slate-900 to-indigo-950 text-slate-100">
  <header class="py-4 text-center">
    <h1 class="text-2xl font-bold">üó∫Ô∏è Leaflet + Tailwind</h1>
    <p class="text-slate-400">T√¨m ki·∫øm & l·ªçc theo category</p>
  </header>

  <main class="w-[min(1100px,92vw)] mx-auto pb-8">
    <div class="sticky top-0 z-10 bg-slate-900/80 backdrop-blur rounded-xl p-3 flex flex-wrap gap-3 mb-3">
      <input id="q" class="px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 outline-none" placeholder="T√¨m ƒë·ªãa ƒëi·ªÉm..." />
      <select id="cat" class="px-3 py-2 rounded-lg bg-slate-800 border border-slate-700">
        <option value="">T·∫•t c·∫£ lo·∫°i</option>
      </select>
    </div>
    <div id="map" class="h-[70dvh] rounded-2xl border border-slate-800 overflow-hidden"></div>
  </main>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    const DATA = [{"id": 1, "name": "H√† N·ªôi", "lat": 21.0278, "lon": 105.8342, "category": "City", "value": 92}, {"id": 2, "name": "H·ªì Ch√≠ Minh", "lat": 10.8231, "lon": 106.6297, "category": "City", "value": 98}, {"id": 3, "name": "ƒê√† N·∫µng", "lat": 16.0544, "lon": 108.2022, "category": "City", "value": 85}, {"id": 4, "name": "Hu·∫ø", "lat": 16.4637, "lon": 107.5909, "category": "Heritage", "value": 74}, {"id": 5, "name": "C·∫ßn Th∆°", "lat": 10.0452, "lon": 105.7469, "category": "City", "value": 63}, {"id": 6, "name": "Nha Trang", "lat": 12.2388, "lon": 109.1967, "category": "Resort", "value": 80}, {"id": 7, "name": "H·∫° Long", "lat": 20.9714, "lon": 107.0448, "category": "Nature", "value": 77}, {"id": 8, "name": "ƒê√† L·∫°t", "lat": 11.9404, "lon": 108.4583, "category": "Resort", "value": 70}, {"id": 9, "name": "H·∫£i Ph√≤ng", "lat": 20.8449, "lon": 106.6881, "category": "Port", "value": 68}, {"id": 10, "name": "Vinh", "lat": 18.6796, "lon": 105.6813, "category": "City", "value": 55}, {"id": 11, "name": "Quy Nh∆°n", "lat": 13.7829, "lon": 109.2196, "category": "Resort", "value": 66}, {"id": 12, "name": "Ph√∫ Qu·ªëc", "lat": 10.2899, "lon": 103.984, "category": "Island", "value": 72}];
    const q = (s)=> document.querySelector(s);
    const map = L.map('map').setView([16.3, 106.0], 5.5);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', { maxZoom: 19, attribution: '&copy; OpenStreetMap' }).addTo(map);
    const qinp = q('#q'); const cat = q('#cat');

    const cats = Array.from(new Set(DATA.map(p=>p.category)));
    cat.innerHTML += cats.map(c=>`<option value="${c}">${c}</option>`).join('');

    let layerGroup = L.layerGroup().addTo(map);

    function render(list){
      layerGroup.clearLayers();
      for(const p of list){
        const circle = L.circleMarker([p.lat, p.lon], { radius: Math.max(6, p.value/12), color:'#a78bfa', fillColor:'#60a5fa', fillOpacity:0.6 });
        circle.bindPopup(`<b>${p.name}</b><br>Lo·∫°i: ${p.category}<br>ƒêi·ªÉm: ${p.value}`);
        circle.addTo(layerGroup);
      }
    }
    function apply(){
      let items = [...DATA];
      const term = qinp.value.trim().toLowerCase();
      if(term) items = items.filter(p => (p.name + ' ' + p.category).toLowerCase().includes(term));
      if(cat.value) items = items.filter(p => p.category === cat.value);
      render(items);
    }
    qinp.oninput = apply; cat.onchange = apply;
    apply();
  </script>
</body>
</html>
