<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Tasks — Level 2 (JS)</title>
  <style>
    :root{--bg:#0f1220;--card:#161a2b;--txt:#e5e7eb;--muted:#94a3b8}
    *{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:linear-gradient(135deg,#0b1020,#1b1630);color:var(--txt)}
    header{text-align:center;padding:24px}
    .wrap{width:min(1000px,92vw);margin:0 auto;padding-bottom:40px}
    .toolbar{display:flex;flex-wrap:wrap;gap:8px;background:#0b1020;border:1px solid #243;border-radius:12px;padding:10px;margin-bottom:12px}
    input, select, button{background:#0f1220;border:1px solid #243;color:#e5e7eb;border-radius:10px;padding:8px 10px}
    button.add{background:linear-gradient(90deg,#7c3aed,#06b6d4);border:none}
    .list{display:grid;gap:10px}
    .item{display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center;background:#161a2b;border-radius:12px;padding:10px}
    .title{font-weight:600} .meta{font-size:12px;opacity:.8}
    .done .title{text-decoration:line-through;opacity:.7}
    .pill{font-size:12px;padding:4px 8px;border-radius:999px;border:1px solid #283055}
  </style>
</head>
<body>
  <header>
    <h1>✅ Task Management — JS</h1>
  </header>
  <main class="wrap">
    <div class="toolbar">
      <input id="title" placeholder="Thêm công việc...">
      <input id="due" type="date">
      <select id="priority">
        <option value="high">High</option>
        <option value="medium" selected>Medium</option>
        <option value="low">Low</option>
      </select>
      <button id="add" class="add">Thêm</button>
      <select id="filter">
        <option value="all">All</option>
        <option value="active">Active</option>
        <option value="done">Done</option>
      </select>
    </div>
    <section id="list" class="list"></section>
  </main>

  <script>
    let tasks = [
      { id:'t1', title:'Thiết kế wireframe', done:false, priority:'high', due:'2025-10-25' },
      { id:'t2', title:'Viết API spec', done:true, priority:'medium', due:'2025-10-18' }
    ]

    const title = document.getElementById('title')
    const due = document.getElementById('due')
    const priority = document.getElementById('priority')
    const addBtn = document.getElementById('add')
    const filter = document.getElementById('filter')
    const list = document.getElementById('list')

    function uid(){ return Math.random().toString(36).slice(2,9) }

    function render(){
      let items = [...tasks]
      if(filter.value==='active') items = items.filter(t=>!t.done)
      if(filter.value==='done') items = items.filter(t=>t.done)
      list.innerHTML = items.map(t => `
        <div class="item ${t.done?'done':''}">
          <input type="checkbox" ${t.done?'checked':''} onchange="toggleTask('${t.id}')">
          <div>
            <div class="title">${t.title}</div>
            <div class="meta">Due: ${t.due || '-'}</div>
          </div>
          <div style="display:flex;gap:6px">
            <span class="pill">${t.priority}</span>
            <button onclick="delTask('${t.id}')">Xoá</button>
          </div>
        </div>
      `).join('')
    }

    window.toggleTask = (id)=>{ const t = tasks.find(x=>x.id===id); if(t){ t.done=!t.done; render() } }
    window.delTask = (id)=>{ tasks = tasks.filter(x=>x.id!==id); render() }

    addBtn.onclick = ()=>{
      const t = title.value.trim()
      if(!t) return
      tasks.unshift({ id: uid(), title: t, done:false, priority: priority.value, due: due.value })
      title.value=''; due.value=''
      render()
    }
    filter.onchange = render
    render()
  </script>
</body>
</html>
